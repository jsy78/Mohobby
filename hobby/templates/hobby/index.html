{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% load static %}

{% block css %}
{% endblock %}
{% block content %}

<!-- 카테고리별 태그 버튼 -->
<div style="margin-top:120px;">
  <div class="tag_box container">
    <h2 class="index_title fw-bold">{{ category_name }}</h2>
    {% for tag in tags %}
    <a href="{% url 'hobby:tag' tag.tag  %}" style="float: left;">
      <div class="tag_button position-relative">
        <span class="tag_text">
          # {{ tag.tag }}
        </span>
      </div>
    </a>
    {% endfor %}
  </div>
  <!-- 카테고리별 태그 버튼 -->

  <div class='container justify-content-center post_page'>
    <div style='width:100%'>
      <!-- 인기 모임 글 -->
      <div class='my-5'>
        <h3 class="main_color fw-bold">인기 소셜링</h3>
        <div class="d-flex justify-content-center">
          <div class='d-flex flex-column post_size'>
            {% for tag_post in category_posts_hit %}
            {% if tag_post.host not in request.user.blocking.all %}
            <a href="{% url 'hobby:detail' tag_post.pk %}" class="tag_a">
              <div class='d-flex my-2 post'>
                <div class="col-4">
                  {% if tag_post.image %}
                  <img class='post_img' src="{{ tag_post.image.url }}" style='width:100%; height: 250px;'>
                  {% else %}
                  <img class='post_img' src="{% static 'images/더미이미지.png' %}" alt="...">
                  {% endif %}
                </div>
                <div class="d-flex align-items-center">
                  <div class='mx-5'>
                    <div class='my-3'>
                      <small class="tag p-1"> {{ tag_post.tags }}</small>
                    </div>
                    <p class="post_title">{{ tag_post.title }}</p>
                    <small class='text-muted post_detail'>
                      <span class="detail">
                        <i class="bi bi-geo-alt-fill"></i>
                        {{ tag_post.address }}&nbsp;
                      </span>
                      <span class="detail">
                        <i class="bi bi-calendar-check-fill"></i>
                        {{ tag_post.meeting_day|date:'m.d(D) af' }}&nbsp;
                      </span>
                      <span class="detail">
                        <i class="bi bi-people-fill"></i>
                        {{ tag_post.joinmembers }}/{{ tag_post.limit }}</small>
                    </span>
                    <div class="profil_box d-flex">
                      {% for member in tag_post.accepted.all %}
                      {% if forloop.counter <= 6 %}
                      {% if member.joined == 1 %}
                      {% if member.user.image %}
                      <img class="tag_profil" src="{{ member.user.image.url }}">
                      {% else %}
                      <img class="tag_profil" src="{% static 'images/프로필.png' %}">
                      {% endif %}
                      {% endif %}
                      {% endif %}
                      {% endfor %}
                      <i class="bi bi-plus-circle"></i>
                    </div>
                  </div>
                </div>
              </div>
            </a>
            {% endif %}
            {% endfor %}
            <div class='d-flex my-2 post'>
              <div class="col-4">
                <img class='post_img' src="https://dummyimage.com/500x200/000/fff" alt="..."
                  style='width:100%; height: 250px;'>
              </div>
              <div class="d-flex align-items-center">
                <div class='mx-5'>
                  <div class='my-3'>
                    <small class="tag p-1">#태그</small>
                    <small class="tag p-1">#태그</small>
                    <small class="tag p-1">#태그</small>
                  </div>
                  <h3>본문에 제목이 들어갈 곳입니다.
                  </h3>
                  <small class='text-muted'>
                    해당 글의
                    <i class="bi bi-calendar-check-fill"></i>
                    날짜
                    <i class="bi bi-geo-alt-fill"></i>
                    장소
                    <i class="bi bi-person-fill"></i>
                    인원수 가 들어갈 곳입니다.</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- 카데고리 전체 글 -->
      <div class='my-5'>
        <h3 class="main_color fw-bold">전체 소셜링</h3>
        <div class="d-flex justify-content-center">
          <div class='d-flex flex-column post_size'>
            {% for tag_post in category_posts %}
            {% if tag_post.host not in request.user.blocking.all %}
            <a href="{% url 'hobby:detail' tag_post.pk %}" class="tag_a">
              <div class='d-flex my-2 post'>
                <div class="col-4">
                  {% if tag_post.image %}
                  <img class='post_img' src="{{ tag_post.image.url }}" style='width:100%; height: 250px;'>
                  {% else %}
                  <img class='post_img' src="{% static 'images/더미이미지.png' %}" alt="...">
                  {% endif %}
                </div>
                <div class="d-flex align-items-center">
                  <div class='mx-5'>
                    <div class='my-3'>
                      <small class="tag p-1"> {{ tag_post.tags }}</small>
                    </div>
                    <p class="post_title">{{ tag_post.title }}</p>
                    <small class='text-muted post_detail'>
                      <span class="detail">
                        <i class="bi bi-geo-alt-fill"></i>
                        {{ tag_post.address }}&nbsp;
                      </span>
                      <span class="detail">
                        <i class="bi bi-calendar-check-fill"></i>
                        {{ tag_post.meeting_day|date:'m.d(D) af' }}&nbsp;
                      </span>
                      <span class="detail">
                        <i class="bi bi-people-fill"></i>
                        {{ tag_post.joinmembers }}/{{ tag_post.limit }}</small>
                    </span>
                    <div class="profil_box d-flex">
                      {% for member in tag_post.accepted.all %}
                      {% if forloop.counter <= 6 %}
                      {% if member.joined == 1 %}
                      {% if member.user.image %}
                      <img class="tag_profil" src="{{ member.user.image.url }}">
                      {% else %}
                      <img class="tag_profil" src="{% static 'images/프로필.png' %}">
                      {% endif %}
                      {% endif %}
                      {% endif %}
                      {% endfor %}
                      <i class="bi bi-plus-circle"></i>
                    </div>
                  </div>
                </div>
              </div>
            </a>
            {% endif %}
            {% endfor %}
            <div class='d-flex my-2 post'>
              <div class="col-4">
                <img class='post_img' src="https://dummyimage.com/500x200/000/fff" alt="..."
                  style='width:100%; height: 250px;'>
              </div>
              <div class="d-flex align-items-center">
                <div class='mx-5'>
                  <div class='my-3'>
                    <small class="tag p-1">#태그</small>
                    <small class="tag p-1">#태그</small>
                    <small class="tag p-1">#태그</small>
                  </div>
                  <h3>본문에 제목이 들어갈 곳입니다.
                  </h3>
                  <small class='text-muted'>
                    해당 글의
                    <i class="bi bi-calendar-check-fill"></i>
                    날짜
                    <i class="bi bi-geo-alt-fill"></i>
                    장소
                    <i class="bi bi-person-fill"></i>
                    인원수 가 들어갈 곳입니다.</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

{% endblock content %}